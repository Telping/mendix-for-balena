import{n as E,d as b,T as w,e as h,f as j,O as y}from"./DTxgj959.js";import{r as C}from"./D-Sagn14.js";const D=E.get().getLogger();function T(u,d,f,l,p=!1){let e={};const o=new Set,[g,m]=b(`Update ${d}`,()=>{Object.values(e).forEach(t=>t.disposer()),e={}});return[w(`Value for ${d}`,()=>{g.dependOn();const t=i=>function(n){let c=!0;o.add(n.id);const s=h(n,f,d),r=e[n.id];if(r&&r.source!==s&&(r.disposer(),delete e[n.id]),!(n.id in e)){const O=u(s),a={source:s};a.disposer=j(()=>(c||C(m),O.dependOn()),v=>a.value=v,{fireImmediately:!0}),e[n.id]=a}return c=!1,y(e[n.id]).value}(i);return Object.assign(p?i=>(D.warn(`DEPRECATED: direct usage of ${d} as a function, use .get() instead -- will be removed in version: 10.0`),t(i)):{},l,{get:t})}),function(){Object.entries(e).forEach(([t,i])=>{o.has(t)||(i.disposer(),delete e[t])}),o.clear()}]}export{T as y};
