import{n as U,m as M,q as R,O as g,M as K,C as x,K as y,P as d,bD as N,Y as W,V as G,k as V,$ as z,cH as u}from"./DTxgj959.js";const f=U.get().getLogger(),D=M((e,t,n)=>{const a=R(t,g(e.scope)),r=K(n);return!e.path||mx.isOffline()?x(e,t,n,e.path?y(a,e.path,t):a,i=>(o(i),d(i))):x(e,t,n,y(a,e.path,t,!0),i=>{if(i instanceof N)return o(i),d(i);const l=W(G(a)).getGuid();return function(c){f.debug(`Fetching object with context object '${c}' and operationId '${e.operationId}' for widget ${r}`)}(l),V().retrieveByPath(l,g(e.operationId)).then(({mxObjects:c,extra:B})=>{const s=c.length?c[0]:void 0;return function(P,v){const C=P?.getGuid();f.debug(C?`Received object '${C}' and ${v.length} objects over schema for widget ${r}`:`Received no object for widget ${r}`,"extra ids:",v.map(F=>F.getGuid()))}(s,B),s?d(s):z()})});function o(i){f.debug(`Using object '${i.getGuid()}' for widget ${r}`)}});async function L(e){return e?new Promise(t=>{mx.data.update({guid:e.getGuid(),callback:()=>t(!0)})}):Promise.reject(new Error("ObjectToRefresh parameter is required"))}var H=Object.freeze({__proto__:null,RefreshObject:L}),h=u(H);function _(e){Q(),e.focus(),Y(e)}function Q(){const e=document.getSelection();e===null||X(e)||(e.removeAllRanges(),e.addRange(document.createRange()))}function X(e){if(e.rangeCount===1){const t=e.getRangeAt(0);return t.startOffset===t.endOffset}return e.rangeCount===0}function Y(e){const t=e;(t.type==="text"||t.type==="password")&&t.select()}function J(e){const t=Z(e);t&&_(t)}function Z(e){return w(e,!1)}const b="data-focusindex";function w(e,t,n){const r=S(e),o=Object.keys(r).map(i=>parseInt(i,10)).filter(te(void 0,t)).sort(p);for(const i of o){let l=r[i];if(l!==void 0){i===void 0&&(l=l.slice(l.indexOf(n)+1));const c=ee(l,t);if(c)return c}}return null}function ee(e,t){for(const n of e){if($(n))return n;if(T(n)&&!A(n)){const a=w(n,t);if(a)return a}}return null}function S(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(let n=0;n<e.children.length;n++){const a=e.children.item(n);if(!ce(a))continue;const r=ne(a);(t[r]=r in t?t[r]:[]).push(a),T(a)||S(a,t)}return t}function te(e,t){return e===void 0?()=>!0:t?n=>p(n,e)<=0:n=>p(n,e)>=0}function p(e,t){return e===t?0:e===0?1:t===0?-1:e-t}function T(e){return e===document.body||e.getAttribute(b)!==null}function ne(e){const t=I(e,b),n=t!==null?t:j(e);return Math.max(0,n??0)}function j(e){const t=I(e,"tabindex");return t!==-32768?t:null}function I(e,t){const n=e.getAttribute(t);return n?parseInt(n,10):null}function A(e){return e.getAttribute(b)==="-1"}function $(e){return ae(e)&&ie(e)}function ae(e){if(A(e))return!1;const t=j(e);return(t===null?re(e):t)>=0}function re(e){switch(e.tagName.toLowerCase()){case"a":case"area":case"button":case"input":case"object":case"select":case"textarea":return 0;default:return e.getAttribute("contenteditable")?0:-1}}function ie(e){return oe(e)&&le(e)}function oe(e){return e.offsetWidth===0&&e.offsetHeight===0?!1:window.getComputedStyle(e).visibility==="visible"}function le(e){return!e.disabled}function ce(e){return e.offsetParent!==void 0}async function ue(e){const t=e?document.querySelector(e):null;t?$(t)?_(t):J(t):console.warn(`No DOM node found to set focus for query selector ${e}`)}var se=Object.freeze({__proto__:null,SetFocus:ue}),E=u(se);const m={name:"ConversationalUI.ChatContext_SendMessage",instructions:[{type:"microflowCall",label:"be48a9cd-64ed-4707-88c1-747508b7ba32",operationId:"aNTlmW9x6FCskMGmdW5BRQ",parameters:[{name:"ChatContext",value:{type:"variable",variable:"ChatContext"},kind:"object"}],outputVar:"Success"},{type:"switch",label:"2e71c16e-97a6-43cf-89a2-a15a04a0251a",condition:{type:"variable",variable:"Success"},targets:{true:"b0c3a340-654e-40dc-96ec-17a8b5589cfb",false:"09a6a97a-a080-467c-b108-1c9905dcb96c"}},{type:"return",label:"09a6a97a-a080-467c-b108-1c9905dcb96c",result:{type:"literal",value:null},resultKind:"primitive"},{type:"javaScriptActionCall",label:"b0c3a340-654e-40dc-96ec-17a8b5589cfb",action:()=>h.RefreshObject,parameters:[{kind:"object",value:{type:"variable",variable:"ChatContext"}}]},{type:"microflowCall",label:"25f3f4a3-a590-4441-9a8c-d02a21904030",operationId:"P03fh8FdPlWC/O3jSOABQw",parameters:[{name:"ChatContext",value:{type:"variable",variable:"ChatContext"},kind:"object"}]},{type:"javaScriptActionCall",label:"9580b232-7518-496b-978b-d72ec0a54a6b",action:()=>E.SetFocus,parameters:[{kind:"primitive",value:{type:"literal",value:".mx-name-textAreaUserPrompt"}}]},{type:"return",label:"b822412e-fb06-45ba-99fe-26cb97a4964c",result:{type:"literal",value:null},resultKind:"primitive"}]};async function de(e){return e==null?Promise.reject(new Error("Input parameter 'delay' is required.")):new Promise(t=>{setTimeout(()=>t(),Number(e))})}var fe=Object.freeze({__proto__:null,Wait:de}),O=u(fe);async function be(e){const t=document.querySelector(e);t?t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}):console.log("no item found")}var pe=Object.freeze({__proto__:null,ScrollTo:be}),k=u(pe);const me={name:"ConversationalUI.ScrollToBottom",instructions:[{type:"javaScriptActionCall",label:"b4a9c38c-6a0f-4f99-a791-fb0cdac85ba6",action:()=>O.Wait,parameters:[{kind:"primitive",value:{type:"literalNumeric",value:"150"}}]},{type:"javaScriptActionCall",label:"26df07a8-50ab-4cd5-8e7a-9cf565f45592",action:()=>k.ScrollTo,parameters:[{kind:"primitive",value:{type:"literal",value:".listview-scroll-to-last> ul > li:last-child"}}]},{type:"return",label:"2b79cce2-45ee-48e7-97f3-66474fd51400",result:{type:"literal",value:null},resultKind:"primitive"}]};function q(e){const t=document.querySelector('button[class*="'+e+'"]');if(t===null)throw new Error("Button with that name could not be found.");t.click()}async function ve(e,t,n,a){try{if(!e||e.trim().length===0)throw new Error("TextAreaName is required.");if(!t||t.trim().length===0)throw new Error("ButtonName is required.");const r=document.querySelector('textarea[id*="'+e+'"]');if(r===null)throw new Error("Textarea with that name could not be found.");r.addEventListener("keydown",function(o){o.key==="Enter"&&(o.shiftKey?a&&q(t):!o.ctrlKey&&!o.altKey&&!o.metaKey&&n&&q(t))})}catch(r){console.error(r)}}var Ce=Object.freeze({__proto__:null,Textarea_ExecuteButtonAction:ve}),ge=u(Ce);const xe={name:"ConversationalUI.ACT_Textarea_ExecuteButtonAction",instructions:[{type:"javaScriptActionCall",label:"047de444-468b-43e8-8898-105948f4b9e9",action:()=>ge.Textarea_ExecuteButtonAction,parameters:[{kind:"primitive",value:{type:"literal",value:"textAreaUserPrompt"}},{kind:"primitive",value:{type:"literal",value:"btnSendMessage"}},{kind:"primitive",value:{type:"literal",value:!0}},{kind:"primitive",value:{type:"literal",value:!1}}]},{type:"return",label:"8be6bc73-7074-4a50-84d9-ce827ecfd2b3",result:{type:"literal",value:null},resultKind:"primitive"}]},ye={name:"ConversationalUI.ACT_ChatContext_ExecuteSuggestedUserPrompt",instructions:[{type:"changeObject",label:"dc18db1f-16f4-4ced-9aaf-749172a276ad",inputVar:"ChatContext",member:"CurrentUserPrompt",value:{type:"function",name:"trim",parameters:[{type:"variable",variable:"SuggestedUserPrompt",path:"Content"}]}},{type:"nanoflowCall",label:"7e50dbb3-8c62-4437-8ddc-03111b1b46b7",flow:()=>m,parameters:[{name:"ChatContext",value:{type:"variable",variable:"ChatContext"},kind:"object"}]},{type:"return",label:"2786dd5a-316b-4e43-9a46-69acaeb71a22",result:{type:"literal",value:null},resultKind:"primitive"}]},he={name:"ConversationalUI.ACT_ChatContext_SendMessage",instructions:[{type:"nanoflowCall",label:"0788604b-8023-4fd9-8970-7d643b6b4237",flow:()=>m,parameters:[{name:"ChatContext",value:{type:"variable",variable:"ChatContext"},kind:"object"}]},{type:"return",label:"fb3f38ba-da8c-4f0b-8ebf-8368f87ee4ca",result:{type:"literal",value:null},resultKind:"primitive"}]};export{xe as A,m as C,D as M,me as S,ye as a,he as b,E as c,h as d,k as e,O as r};
