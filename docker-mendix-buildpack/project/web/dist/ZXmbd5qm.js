import{m as p,h as m,M as h,Q as C,ah as j,P as I,ai as $,r,aj as M,ak as S,b as k,T as y,O as D,al as E,S as d,am as L}from"./DTxgj959.js";import{y as f}from"./C1Yo2GSP.js";import{U as P,i as V}from"./DyHdX6nL.js";import"./D-Sagn14.js";import{C as w}from"./DWFzDMGp.js";import{a as A}from"./BUxt1Yep.js";const F=p((t,e,n,a)=>f(o=>{const s=m({[n]:{object:{object:o}}});return P(t,e,n,s,!0)},`List action "${n}/${a}"`,t.dataSourceId)),N=p((t,e,n,a)=>f(o=>function(s,c,i,b){const l=`Value of ${h(i)}`,g=m(I(b));return C(j(l,c,s.expression,u=>u.widget===i&&u.source==="object"?g:$(l,c,u)))}(t,e,n,o),`List expression "${n}/${a}"`,t.dataSourceId));function O(){const t=`useCurrentFormId(${r.useContext(M)})`;r.useDebugValue(t);const[e]=S(k,"form"),n=r.useMemo(()=>y(t,()=>D(e.dependOn())[0].getHistoryId()),[]);return E(n)}function R(t){return x(t,"").flatMap(v)}function x(t,e){return t.map((n,a)=>{const o=`${e}${a}`;return{stableId:o,caption:n.caption,icon:n.icon,altCaption:n.altCaption,action:n.action,items:n.items?x(n.items,`${o}-`):void 0}})}function v(t){if(t.action&&!t.action.isAuthorized)return[];if(t.items){const e=t.items.flatMap(v);return e.length?[{...t,items:e}]:[]}return[t]}function T(t,e,n,a,o={}){const s=e.caption?.value??"",c=e.items?.length;return d.jsxs("a",{...o,className:L(`mx-name-${t}-${e.stableId}`,o.className),href:"#",role:"menuitem",title:s,onClick:i=>{i.preventDefault(),i.stopPropagation(),a(e)},onKeyDown:i=>{i.key!=="Enter"&&i.key!==" "||(i.preventDefault(),i.stopPropagation(),a(e))},"aria-haspopup":!!c||void 0,"aria-expanded":c?n:void 0,children:[e.icon?d.jsx(V,{icon:e.icon.value,altText:e.caption?.value?void 0:e.altCaption?.value}):null," "+s,o.children]})}function z(){const[t,e]=H(),{resetSidebar:n}=r.useContext(A);return[t,r.useCallback(a=>{(a.action===void 0||a.action.canExecute&&(!a.action.disabledDuringExecution||!a.action.isExecuting))&&(a.action?.execute(),e(a.stableId),n())},[])]}function H(){const t=O(),[e,n]=w("activeItem",()=>({[t]:null})),[a,o]=r.useState(e[t]??void 0),s=r.useRef(t);return s.current!==t&&(t in e?o(e[t]??void 0):n({...e,[t]:a??null}),s.current=t),[a,o]}export{T as A,R as M,z as S,N as V,F as c};
