import{r as s,O as $,S as m,U,am as X,W as J,X as K}from"./DTxgj959.js";import{n as Q}from"./D-Sagn14.js";function R(){return R=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},R.apply(null,arguments)}var Y=s.useLayoutEffect,W=function(t,e){typeof t!="function"?t.current=e:t(e)},j={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},k=function(t){Object.keys(j).forEach(function(e){t.style.setProperty(e,j[e],"important")})},o=null,G=function(t,e){var r=t.scrollHeight;return e.sizingStyle.boxSizing==="border-box"?r+e.borderSize:r-e.paddingSize},I=function(){},Z=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],_=!!document.documentElement.currentStyle,ee=function(t){var e=window.getComputedStyle(t);if(e===null)return null;var r,n=(r=e,Z.reduce(function(p,h){return p[h]=r[h],p},{})),d=n.boxSizing;return d===""?null:(_&&d==="border-box"&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px"),{sizingStyle:n,paddingSize:parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),borderSize:parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth)})};function O(t,e,r){var n,d,p=(n=r,d=s.useRef(n),Y(function(){d.current=n}),d);s.useLayoutEffect(function(){var h=function(b){return p.current(b)};if(t)return t.addEventListener(e,h),function(){return t.removeEventListener(e,h)}},[])}var te=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],re=function(t,e){var r=t.cacheMeasurements,n=t.maxRows,d=t.minRows,p=t.onChange,h=p===void 0?I:p,b=t.onHeightChange,N=b===void 0?I:b,E=function(i,a){if(i==null)return{};var u={};for(var l in i)if({}.hasOwnProperty.call(i,l)){if(a.indexOf(l)!==-1)continue;u[l]=i[l]}return u}(t,te),F=E.value!==void 0,c=s.useRef(null),P=function(i,a){var u=s.useRef();return s.useCallback(function(l){i.current=l,u.current&&W(u.current,null),u.current=a,a&&W(a,l)},[a])}(c,e),H=s.useRef(0),x=s.useRef(),g=function(){var i=c.current,a=r&&x.current?x.current:ee(i);if(a){x.current=a;var u=function(f,B,y,V){y===void 0&&(y=1),V===void 0&&(V=1/0),o||((o=document.createElement("textarea")).setAttribute("tabindex","-1"),o.setAttribute("aria-hidden","true"),k(o)),o.parentNode===null&&document.body.appendChild(o);var w=f.paddingSize,A=f.borderSize,C=f.sizingStyle,M=C.boxSizing;Object.keys(C).forEach(function(D){var T=D;o.style[T]=C[T]}),k(o),o.value=B;var v=G(o,f);o.value=B,v=G(o,f),o.value="x";var S=o.scrollHeight-w,L=S*y;M==="border-box"&&(L=L+w+A),v=Math.max(L,v);var z=S*V;return M==="border-box"&&(z=z+w+A),[v=Math.min(z,v),S]}(a,i.value||i.placeholder||"x",d,n),l=u[0],q=u[1];H.current!==l&&(H.current=l,i.style.setProperty("height",l+"px","important"),N(l,{rowHeight:q}))}};return s.useLayoutEffect(g),function(i,a){O(document.body,"reset",function(u){i.current.form===u.target&&a(u)})}(c,function(){if(!F){var i=c.current.value;requestAnimationFrame(function(){var a=c.current;a&&i!==a.value&&g()})}}),O(window,"resize",g),function(i){O(document.fonts,"loadingdone",i)}(g),s.createElement("textarea",R({},E,{onChange:function(i){F||g(),h(i)},ref:P}))},ne=s.forwardRef(re);class ie extends s.Component{constructor(){super(...arguments),this.state={},this.onChangeHandler=this.onChange.bind(this),this.onFocusHandler=this.onFocus.bind(this),this.onBlurHandler=this.onBlur.bind(this),this.onChangeBehaviourHandler=this.createOnChangeBehaviour()}componentDidMount(){const e=this.props.maxLength;e!==void 0&&this.props.inputValue.setValidator(r=>r!==void 0&&r.length>e?this.props.textTooLongMessage.value:void 0)}componentDidUpdate(e){this.props.inputValue.displayValue!==e.inputValue.displayValue&&this.setState({editedValue:void 0}),e.inputValue.status!=="available"&&this.props.inputValue.status==="available"&&this.props.autoGrow&&setTimeout(()=>window.dispatchEvent(new Event("resize")),0)}createOnChangeBehaviour(){return this.props.submitWhileEditing?Q(this.submitValue.bind(this),$(this.props.submitDelay)):()=>{}}getCurrentValue(){return this.state.editedValue??this.props.inputValue.displayValue}submitValue(){const e=this.props.inputValue,r=this.getCurrentValue();r!==e.displayValue?e.setValue(r):this.setState({editedValue:void 0})}onChange(e){this.setState({editedValue:e.target.value},()=>{!this.props.inputValue.readOnly&&e.target instanceof HTMLTextAreaElement&&document.activeElement!==e.target&&this.submitValue()}),this.onChangeBehaviourHandler()}onFocus(){this.dispatchAction("onEnter")}onBlur(){this.submitValue(),this.dispatchAction("onLeave")}render(){return m.jsxs(s.Fragment,{children:[this.props.inputValue.readOnly&&this.props.readOnlyStyle!=="control"?this.renderAsText():this.renderAsInput(),this.renderCounterMessage(),m.jsx(U,{id:`${this.props.id}-error`,validation:this.props.inputValue.validation})]})}renderCounterMessage(){return!this.props.inputValue.readOnly&&this.props.maxLength&&this.props.counterMessage?.value?m.jsx("label",{className:"mx-textarea-counter",children:this.props.counterMessage.value.replace("{1}",this.getCurrentValue().length.toString()).replace("{2}",this.props.maxLength.toString())}):null}renderAsInput(){return m.jsx(ne,{id:this.props.id,className:X("form-control","mx-textarea-input",{"mx-textarea-noresize":!this.props.autoGrow}),value:this.getCurrentValue(),tabIndex:this.props.tabIndex,maxLength:this.props.maxLength,minRows:this.props.autoGrow?2:this.props.numberOfLines,maxRows:this.props.autoGrow?void 0:this.props.numberOfLines,placeholder:this.props.placeholder.value&&this.props.placeholder.value.length>0?this.props.placeholder.value:void 0,onChange:this.onChangeHandler,onFocus:this.onFocusHandler,onBlur:this.onBlurHandler,disabled:this.props.inputValue.readOnly,...J(this.props.ariaLabel?.value),...K(this.props.inputValue.validation,this.props.id),"aria-required":this.props.ariaRequired})}renderAsText(){return m.jsx("div",{className:"form-control-static",children:this.getCurrentValue()||"\xA0"})}dispatchAction(e){const r=this.props[e];this.props.inputValue.status==="available"&&r&&r.execute()}}export{ie as d};
